<div class="lnr-dialog-header">
  <h5 mat-dialog-title>Change your password</h5>
  <lnr-button-close (click)="close()"></lnr-button-close>
</div>
<mat-dialog-content>
  <form [formGroup]="form" class="lnr-mrg-btm">
    <mat-error>
      <lnr-http-error-message [error]="error"></lnr-http-error-message>
    </mat-error>

    <div class="row">
      <div class="col-sm-12">
        <mat-form-field class="w-100" appearance="outline">
          <mat-label>Old password</mat-label>
          <input
            formControlName="oldPassword"
            [type]="oldPasswordVisible ? 'text' : 'password'"
            matInput
            placeholder="Old password"
          />
          <span
            class="toggle-visibility"
            (click)="toggleOldPasswordVisibility()"
          >
            <mat-icon>visibility</mat-icon>
          </span>
          <mat-error
            *ngIf="
              form.get('oldPassword').touched && form.get('oldPassword').errors
            "
          >
            <small *ngIf="form.get('oldPassword').errors.required"
              >This field is required</small
            >
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-sm-12 lnr-mrg-btm">
        <mat-form-field appearance="outline" class="ath-form-field w-100">
          <mat-label>New password</mat-label>
          <input
            formControlName="password"
            [type]="passwordVisible ? 'text' : 'password'"
            matInput
            placeholder="New password"
          />
          <span class="toggle-visibility" (click)="togglePasswordVisibility()"
            ><mat-icon>visibility</mat-icon></span
          >
          <mat-error
            *ngIf="
              form.get('password')?.touched && form.get('password')?.errors
            "
          >
            <small *ngIf="form.get('password').errors.required"
              >This field is required</small
            >
            <small *ngIf="form.get('password').errors?.minlength">
              The value does not meet length restriction: minimal length is 8
            </small>
            <small *ngIf="form.get('password').errors?.maxlength">
              The value does not meet length restriction: maximum length is 50
            </small>
            <small
              *ngIf="
                !form.get('password').errors?.minlength &&
                !form.get('password').errors?.maxlength
              "
            >
              <small *ngIf="form.get('password').errors?.format">
                Password doesn't match with password policy
              </small>
            </small>
          </mat-error>
        </mat-form-field>

        <div class="password-tips wrapper">
          <div
            class="password-tip"
            *ngFor="let tip of passwordTips"
            [class.confirmed]="doesPasswordMeetsRule(tip.rule)"
          >
            <mat-icon>done</mat-icon>
            <span>{{ tip.text }}</span>
          </div>
        </div>
      </div>

      <div class="col-sm-12">
        <mat-form-field appearance="outline" class="ath-form-field w-100">
          <mat-label>Confirm password</mat-label>
          <input
            formControlName="confirmPassword"
            matInput
            placeholder="Enter password"
          />
          <mat-error
            *ngIf="
              form.get('confirmPassword').touched &&
              form.get('confirmPassword').errors
            "
          >
            <small *ngIf="form.get('confirmPassword').errors.required"
              >This field is required</small
            >
            <small *ngIf="form.get('confirmPassword').errors.match"
              >Passwords don't match</small
            >
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-sm-12">
        <button
          mat-raised-button
          type="submit"
          color="primary"
          class="lnr-w-100"
          [disabled]="form.invalid"
        >
          Save new password
          <lnr-loader-spinner-small *ngIf="false"></lnr-loader-spinner-small>
        </button>
      </div>
    </div>
  </form>
</mat-dialog-content>

<!--<div class="col-sm-6">-->
<!--  <mat-form-field appearance="outline"-->
<!--                  class="ath-form-field w-100">-->
<!--    <mat-label>Password</mat-label>-->
<!--    <input formControlName="password"-->
<!--           matInput-->
<!--           placeholder="Enter password" autocomplete="off">-->
<!--    <mat-error *ngIf="formControls['password'].touched && formControls['password'].errors">-->
<!--      <small *ngIf="formControls['password'].errors.required">This field is required</small>-->
<!--      <small *ngIf="formControls['password'].errors?.minlength">-->
<!--        The value does not meet length restriction: minimal length is 8-->
<!--      </small>-->
<!--      <small *ngIf="formControls['password'].errors?.maxlength">-->
<!--        The value does not meet length restriction: maximum length is 50-->
<!--      </small>-->
<!--      <small-->
<!--        *ngIf="!formControls['password'].errors?.minlength && !formControls['password'].errors?.maxlength">-->
<!--        <small *ngIf="formControls['password'].errors?.format">-->
<!--          Password doesn't match with password policy-->
<!--        </small>-->
<!--      </small>-->
<!--    </mat-error>-->
<!--  </mat-form-field>-->

<!--  <div class="password-tips wrapper" [class.ltm-margin-t-16]="-->
<!--                 !formControls['password'].errors?.minlength &&-->
<!--                 !formControls['password'].errors?.maxlength &&-->
<!--                 formControls['password'].errors?.format">-->
<!--    <div class="password-tip"-->
<!--         *ngFor="let tip of passwordTips"-->
<!--         [class.confirmed]="doesPasswordMeetsRule(tip.rule)">-->
<!--      <mat-icon>done</mat-icon>-->
<!--      <span>{{ tip.text }}</span>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<!--<div class="col-sm-6">-->
<!--  <mat-form-field appearance="outline"-->
<!--                  class="ath-form-field w-100">-->
<!--    <mat-label>Confirm password</mat-label>-->
<!--    <input formControlName="confirmPassword"-->
<!--           matInput-->
<!--           placeholder="Enter password">-->
<!--    <mat-error *ngIf="formControls['confirmPassword'].touched && formControls['confirmPassword'].errors">-->
<!--      <small *ngIf="formControls['confirmPassword'].errors.required">This field is required</small>-->
<!--      <small *ngIf="formControls['confirmPassword'].errors.match">Passwords don't match</small>-->
<!--    </mat-error>-->
<!--  </mat-form-field>-->
<!--</div>-->
